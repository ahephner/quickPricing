<template>
    <div class="searchGroup slds-grid slds-gutters">
        <div class="slds-col slds-size_4-of-5">
            <div onkeyup={handleKeys}>
                <lightning-input type="text" 
                    variant="standard" 
                    name="name" 
                    label="Search" 
                    placeholder="type here..."
                    data-value="searchInput"></lightning-input>
            </div>
        </div> 
            <div class="slds-col slds-size_1-of-5 slds-m-top_large">
                <lightning-button variant="brand" label="Search" 
                        title="search" onclick={handleSearch}></lightning-button>
            </div>
    </div>
    <template if:true={isPinned}>
        <div class="pinned">
            <p>pinned cards go here</p>
        </div>
    </template>
    <template if:false={loaded}>
        <div class="exampleHolder">
            <lightning-spinner alternative-text="Loading" size="medium"></lightning-spinner>
        </div>
    </template>
    <template if:true={loaded}>
        <div class="slds-scrollable_y">
                <lightning-layout multiple-rows="true">
                    <template if:true={prod} for:each={prod} for:item="x" for:index="index">
                        <lightning-layout-item key={x.Id}  class="card" size="12">
                           <!-- Top Line -->
                            <div class="slds-grid">
                                <div class="slds-col slds-size_3-of-4 slds-m-left_x-small">
                                    <a href={x.url} target='_blank' class="searchLinks">
                                        {x.name}
                                    </a>
                                </div>
                                <div class="slds-col slds-size-1-of-4 ">
                                    <span class="stockStatus">
                                        Status: <b>{x.stock}</b>
                                    </span>
                                </div>
                            </div>
                            <div class="slds-grid slds-m-left_x-small">
                                <p>cost: ${x.cost} level 1: ${x.lev1} level 2: ${x.lev2}</p>
                            </div>
<!-- Show pricing input tools -->
                            <div class="chevron">
                                <template lwc:if={x.showPricing}>
                                    <lightning-icon icon-name="utility:chevrondown" alternative-text="Connected" size="xx-small"
                                    title="xx-small size" onclick={closeInputs} data-close={x.Id}></lightning-icon>
                                    <div class="slds-grid">
                                        <lightning-input type="number"  
                                                class="slds-col slds-size_2-of-8"
                                                name={x.Id}
                                                label="Sales Margin"
                                                onchange={handleMargin}></lightning-input>
                                        <div class="slds-col slds-size_2-of-8 slds-m-left_small slds-m-top_xx-small salesPrice">
                                            <label>Sales Price</label>
                                            <span>${x.displayPrice}</span>
                                        </div>
                                    </div>
                                </template>
                                <template lwc:else>
                                    <lightning-icon icon-name="utility:chevronright" alternative-text="Connected" size="xx-small"
                                        title="xx-small size" onclick={openInputs} data-name={x.Id}></lightning-icon>
                                </template>
                            </div>
                        </lightning-layout-item>
                    </template>
                </lightning-layout>
        </div>
    </template>

</template>
